<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§Œì„¸ë ¥ ê³„ì‚°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 40px;
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-size: 14px;
            font-weight: bold;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .date-group {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 10px;
        }
        
        .time-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin: 0;
            cursor: pointer;
        }
        
        .checkbox-group label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
            white-space: nowrap;
        }
        
        button {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 30px;
        }
        
        button:hover {
            background: #45a049;
        }
        
        .help-text {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }
        
        .help-text a {
            color: #4CAF50;
            font-weight: bold;
            text-decoration: none;
        }
        
        .help-text a:hover {
            text-decoration: underline;
        }
        
        .time-table {
            margin-top: 10px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 5px;
            font-size: 13px;
            line-height: 1.8;
        }
        
        .time-table h4 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .result {
            margin-top: 40px;
            padding: 30px;
            background: #f9f9f9;
            border-radius: 10px;
            display: none;
        }
        
        .result.show {
            display: block;
        }
        
        .result h2 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
        }
        
        .result-info {
            text-align: center;
            margin-bottom: 30px;
            color: #666;
            font-size: 14px;
        }
        
        .saju-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .saju-table th {
            background: #4CAF50;
            color: white;
            padding: 12px;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
        }
        
        .saju-table td {
            padding: 15px;
            text-align: center;
            border: 1px solid #e0e0e0;
            font-size: 16px;
        }
        
        .pillar-label {
            background: #f5f5f5;
            font-weight: bold;
            color: #666;
        }
        
        .stem {
            font-size: 24px;
            font-weight: bold;
            color: #d32f2f;
        }
        
        .branch {
            font-size: 24px;
            font-weight: bold;
            color: #1976d2;
        }
        
        .element {
            font-size: 13px;
            color: #666;
            margin-top: 5px;
        }
        
        .sipsung {
            font-size: 12px;
            color: #888;
            margin-top: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ë§Œì„¸ë ¥ ê³„ì‚°ê¸°</h1>
        
        <form id="sajuForm">
            <div class="form-group">
                <label>ì´ë¦„</label>
                <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            </div>
            
            <div class="form-group">
                <label>ì„±ë³„</label>
                <select id="gender" required>
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="male">ë‚¨ì</option>
                    <option value="female">ì—¬ì</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ìƒë…„ì›”ì¼ (ì–‘ë ¥ë§Œ ì…ë ¥)</label>
                <div class="help-text">â€» ìŒë ¥ì¼ ê²½ìš° <a href="https://astro.kasi.re.kr/life/pageView/8" target="_blank">ì—¬ê¸°ì—ì„œ ì–‘ë ¥ ë³€í™˜</a> í›„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                <div class="date-group" style="margin-top: 10px;">
                    <input type="number" id="year" placeholder="ë…„ (ì˜ˆ: 1990)" min="1900" max="2100" required>
                    <input type="number" id="month" placeholder="ì›”" min="1" max="12" required>
                    <input type="number" id="day" placeholder="ì¼" min="1" max="31" required>
                </div>
            </div>
            
            <div class="form-group">
                <label>ì¶œìƒ ì‹œê°„</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="unknownTime">
                    <label for="unknownTime">ì‹œê°„ì„ ëª¨ë¦„ (ì˜¤ì‹œ 11:30ë¡œ ê³„ì‚°)</label>
                </div>
                <div class="time-group" id="timeInputs">
                    <input type="number" id="hour" placeholder="ì‹œ (0-23)" min="0" max="23" value="11">
                    <input type="number" id="minute" placeholder="ë¶„ (0-59)" min="0" max="59" value="30">
                </div>
                <div class="help-text">â€» ìì‹œ(23:30~01:29)ëŠ” ì „ë‚  ê¸°ì¤€ì…ë‹ˆë‹¤</div>
            </div>
            
            <div class="form-group">
                <label>ì¶œìƒ ì§€ì—­</label>
                <select id="region" required>
                    <option value="">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                    <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                    <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>
                    <option value="ê°•ì›ë„">ê°•ì›ë„</option>
                    <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
                    <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
                    <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                    <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                    <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
                    <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
                    <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                    <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
                    <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
                    <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                    <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                    <option value="ê¸°íƒ€ë„ì„œ">ê¸°íƒ€ ë„ì„œì§€ì—­</option>
                </select>
                <div class="help-text">â€» ì¶œìƒ ì§€ì—­ì´ ì—†ì„ ì‹œ ê·¼ì²˜ ì§€ì—­ìœ¼ë¡œ í•´ì£¼ì„¸ìš”</div>
            </div>
            
            <div class="form-group" id="cityGroup" style="display:none;">
                <label>ë„ì‹œ ì„ íƒ</label>
                <select id="city" required>
                    <option value="">ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
                <div class="help-text">â€» ë„ì‹œ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ì‹œì°¨ê°€ ë³´ì •ë©ë‹ˆë‹¤</div>
            </div>
            
            <div class="time-table">
                <h4>ğŸ“‹ 12ê°„ì§€ ì‹œê°„í‘œ</h4>
                ìì‹œ(å­æ™‚) 23:30~01:29 | ì¶•ì‹œ(ä¸‘æ™‚) 01:30~03:29 | ì¸ì‹œ(å¯…æ™‚) 03:30~05:29<br>
                ë¬˜ì‹œ(å¯æ™‚) 05:30~07:29 | ì§„ì‹œ(è¾°æ™‚) 07:30~09:29 | ì‚¬ì‹œ(å·³æ™‚) 09:30~11:29<br>
                ì˜¤ì‹œ(åˆæ™‚) 11:30~13:29 | ë¯¸ì‹œ(æœªæ™‚) 13:30~15:29 | ì‹ ì‹œ(ç”³æ™‚) 15:30~17:29<br>
                ìœ ì‹œ(é…‰æ™‚) 17:30~19:29 | ìˆ ì‹œ(æˆŒæ™‚) 19:30~21:29 | í•´ì‹œ(äº¥æ™‚) 21:30~23:29
            </div>
            
            <button type="submit">ì‚¬ì£¼íŒ”ì ê³„ì‚°í•˜ê¸°</button>
        </form>
        
        <div class="result" id="result">
            <h2>ì‚¬ì£¼íŒ”ì ê²°ê³¼</h2>
            <div class="result-info" id="resultInfo"></div>
            
            <table class="saju-table">
                <thead>
                    <tr>
                        <th>êµ¬ë¶„</th>
                        <th>ìƒì‹œ</th>
                        <th>ìƒì¼</th>
                        <th>ìƒì›”</th>
                        <th>ìƒë…„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pillar-label">ì²œê°„</td>
                        <td class="stem" id="hourStem">-</td>
                        <td class="stem" id="dayStem">-</td>
                        <td class="stem" id="monthStem">-</td>
                        <td class="stem" id="yearStem">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì§€ì§€</td>
                        <td class="branch" id="hourBranch">-</td>
                        <td class="branch" id="dayBranch">-</td>
                        <td class="branch" id="monthBranch">-</td>
                        <td class="branch" id="yearBranch">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì˜¤í–‰</td>
                        <td class="element" id="hourElement">-</td>
                        <td class="element" id="dayElement">-</td>
                        <td class="element" id="monthElement">-</td>
                        <td class="element" id="yearElement">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì‹­ì„±</td>
                        <td class="sipsung" id="hourSipsung">-</td>
                        <td class="sipsung">ì¼ê°„</td>
                        <td class="sipsung" id="monthSipsung">-</td>
                        <td class="sipsung" id="yearSipsung">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">12ìš´ì„±</td>
                        <td class="sipsung" id="hour12">-</td>
                        <td class="sipsung" id="day12">-</td>
                        <td class="sipsung" id="month12">-</td>
                        <td class="sipsung" id="year12">-</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ì§€ì—­ë³„ ë„ì‹œ ë°ì´í„°
        const regionData = {
            'ì„œìš¸íŠ¹ë³„ì‹œ': [{name: 'ì„œìš¸', offset: -2}],
            'ê²½ê¸°ë„': [
                {name: 'ê°€í‰', offset: 2}, {name: 'ê³ ì–‘', offset: -3}, {name: 'ê³¼ì²œ', offset: -3},
                {name: 'ê´‘ëª…', offset: -3}, {name: 'ê´‘ì£¼', offset: -1}, {name: 'êµ¬ë¦¬', offset: -2},
                {name: 'êµ°í¬', offset: -3}, {name: 'ê¹€í¬', offset: -4}, {name: 'ë‚¨ì–‘ì£¼', offset: -2},
                {name: 'ë™ë‘ì²œ', offset: -2}, {name: 'ë¶€ì²œ', offset: -3}, {name: 'ì„±ë‚¨', offset: -2},
                {name: 'ìˆ˜ì›', offset: -2}, {name: 'ì‹œí¥', offset: -3}, {name: 'ì•ˆì‚°', offset: -3},
                {name: 'ì•ˆì„±', offset: -2}, {name: 'ì•ˆì–‘', offset: -3}, {name: 'ì–‘ì£¼', offset: -2},
                {name: 'ì–‘í‰', offset: -1}, {name: 'ì—¬ì£¼', offset: 0}, {name: 'ì—°ì²œ', offset: -2},
                {name: 'ì˜¤ì‚°', offset: -2}, {name: 'ìš©ì¸', offset: -2}, {name: 'ì˜ì™•', offset: -3},
                {name: 'ì˜ì •ë¶€', offset: -2}, {name: 'ì´ì²œ', offset: -2}, {name: 'íŒŒì£¼', offset: -3},
                {name: 'í‰íƒ', offset: -3}, {name: 'í¬ì²œ', offset: -2}, {name: 'í•˜ë‚¨', offset: -2},
                {name: 'í™”ì„±', offset: -3}
            ],
            'ì¸ì²œê´‘ì—­ì‹œ': [
                {name: 'ê°•í™”', offset: -5}, {name: 'ê³„ì–‘êµ¬', offset: -4}, {name: 'êµë™ë„', offset: -6},
                {name: 'ë‚¨ë™êµ¬', offset: -4}, {name: 'ë™êµ¬', offset: -4}, {name: 'ë¶€í‰êµ¬', offset: -4},
                {name: 'ì„œêµ¬', offset: -4}, {name: 'ì„ëª¨ë„', offset: -5}, {name: 'ì—°ìˆ˜êµ¬', offset: -4},
                {name: 'ì˜ì¢…ë„', offset: -5}, {name: 'ì˜í¥ë„', offset: -5}, {name: 'ì¸ì²œ', offset: -4},
                {name: 'ì¤‘êµ¬', offset: -4}
            ],
            'ê°•ì›ë„': [
                {name: 'ê°•ë¦‰', offset: 5}, {name: 'ê³ ì„±', offset: 3}, {name: 'ë™í•´', offset: 6},
                {name: 'ì‚¼ì²™', offset: 5}, {name: 'ì†ì´ˆ', offset: 4}, {name: 'ì–‘ì–‘', offset: 4},
                {name: 'ì˜ì›”', offset: 6}, {name: 'ì›ì£¼', offset: 1}, {name: 'ì¸ì œ', offset: 3},
                {name: 'ì •ì„ ', offset: 4}, {name: 'ì² ì›', offset: -1}, {name: 'ì¶˜ì²œ', offset: 1},
                {name: 'íƒœë°±', offset: 5}, {name: 'í‰ì°½', offset: 5}, {name: 'í™ì²œ', offset: 2},
                {name: 'í™”ì²œ', offset: 1}
            ],
            'ì¶©ì²­ë‚¨ë„': [
                {name: 'ê³µì£¼', offset: -3}, {name: 'ê¸ˆì‚°', offset: 1}, {name: 'ë…¼ì‚°', offset: -2},
                {name: 'ë‹¹ì§„', offset: -5}, {name: 'ë³´ë ¹', offset: -6}, {name: 'ë¶€ì—¬', offset: -3},
                {name: 'ì„œì‚°', offset: -6}, {name: 'ì„œì²œ', offset: -4}, {name: 'ì•„ì‚°', offset: -3},
                {name: 'ì˜ˆì‚°', offset: -4}, {name: 'ì²œì•ˆ', offset: -2}, {name: 'ì²­ì–‘', offset: -4},
                {name: 'íƒœì•ˆ', offset: -5}, {name: 'í™ì„±', offset: -5}
            ],
            'ì¶©ì²­ë¶ë„': [
                {name: 'ê´´ì‚°', offset: 3}, {name: 'ë‹¨ì–‘', offset: 2}, {name: 'ë³´ì€', offset: 0},
                {name: 'ì˜ë™', offset: 1}, {name: 'ì˜¥ì²œ', offset: 0}, {name: 'ìŒì„±', offset: 0},
                {name: 'ì œì²œ', offset: 2}, {name: 'ì¦í‰', offset: 0}, {name: 'ì§„ì²œ', offset: -1},
                {name: 'ì²­ì£¼', offset: 0}, {name: 'ì¶©ì£¼', offset: 1}
            ],
            'ëŒ€ì „ê´‘ì—­ì‹œ': [{name: 'ëŒ€ì „', offset: 0}],
            'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ': [{name: 'ì„¸ì¢…', offset: -1}],
            'ì „ë¼ë‚¨ë„': [
                {name: 'ê°•ì§„', offset: 4}, {name: 'ê³ í¥', offset: 3}, {name: 'ê³¡ì„±', offset: 3},
                {name: 'ê´‘ì–‘', offset: 5}, {name: 'êµ¬ë¡€', offset: 3}, {name: 'ë‚˜ì£¼', offset: -2},
                {name: 'ë‹´ì–‘', offset: 3}, {name: 'ëª©í¬', offset: -5}, {name: 'ë¬´ì•ˆ', offset: -5},
                {name: 'ë³´ì„±', offset: 2}, {name: 'ìˆœì²œ', offset: 4}, {name: 'ì‹ ì•ˆ', offset: -6},
                {name: 'ì—¬ìˆ˜', offset: 6}, {name: 'ì˜ê´‘', offset: 5}, {name: 'ì˜ì•”', offset: -2},
                {name: 'ì™„ë„', offset: 5}, {name: 'ì¥ì„±', offset: 5}, {name: 'ì¥í¥', offset: 4},
                {name: 'ì§„ë„', offset: 6}, {name: 'í•¨í‰', offset: 4}, {name: 'í•´ë‚¨', offset: 4},
                {name: 'í™”ìˆœ', offset: 2}
            ],
            'ì „ë¼ë¶ë„': [
                {name: 'ê³ ì°½', offset: 3}, {name: 'êµ°ì‚°', offset: -4}, {name: 'ê¹€ì œ', offset: -2},
                {name: 'ë‚¨ì›', offset: 5}, {name: 'ë¬´ì£¼', offset: 3}, {name: 'ë¶€ì•ˆ', offset: 6},
                {name: 'ìˆœì°½', offset: 2}, {name: 'ì™„ì£¼', offset: 5}, {name: 'ìµì‚°', offset: -2},
                {name: 'ì„ì‹¤', offset: 2}, {name: 'ì¥ìˆ˜', offset: 3}, {name: 'ì „ì£¼', offset: 1},
                {name: 'ì •ì', offset: 2}, {name: 'ì§„ì•ˆ', offset: 2}
            ],
            'ê´‘ì£¼ê´‘ì—­ì‹œ': [{name: 'ê´‘ì£¼', offset: -2}],
            'ê²½ìƒë‚¨ë„': [
                {name: 'ê±°ì œ', offset: 4}, {name: 'ê±°ì°½', offset: 2}, {name: 'ê³ ì„±', offset: 2},
                {name: 'ê¹€í•´', offset: 6}, {name: 'ë‚¨í•´', offset: 2}, {name: 'ë°€ì–‘', offset: 3},
                {name: 'ì‚¬ì²œ', offset: -5}, {name: 'ì‚°ì²­', offset: 1}, {name: 'ì–‘ì‚°', offset: 6},
                {name: 'ì˜ë ¹', offset: 4}, {name: 'ì§„ì£¼', offset: -1}, {name: 'ì°½ë…•', offset: 2},
                {name: 'ì°½ì›', offset: 4}, {name: 'í†µì˜', offset: 4}, {name: 'í•˜ë™', offset: 1},
                {name: 'í•¨ì•ˆ', offset: 3}, {name: 'í•¨ì–‘', offset: 2}, {name: 'í•©ì²œ', offset: 2}
            ],
            'ê²½ìƒë¶ë„': [
                {name: 'ê²½ì‚°', offset: 5}, {name: 'ê²½ì£¼', offset: 5}, {name: 'ê³ ë ¹', offset: 3},
                {name: 'êµ¬ë¯¸', offset: 5}, {name: 'êµ°ìœ„', offset: 3}, {name: 'ê¹€ì²œ', offset: 5},
                {name: 'ë¬¸ê²½', offset: 2}, {name: 'ë´‰í™”', offset: 2}, {name: 'ìƒì£¼', offset: 2},
                {name: 'ì„±ì£¼', offset: 1}, {name: 'ì•ˆë™', offset: 4}, {name: 'ì˜ë•', offset: 4},
                {name: 'ì˜ì–‘', offset: 4}, {name: 'ì˜ì£¼', offset: 2}, {name: 'ì˜ì²œ', offset: 2},
                {name: 'ì˜ˆì²œ', offset: 4}, {name: 'ìš¸ì§„', offset: 4}, {name: 'ì˜ì„±', offset: 2},
                {name: 'ì²­ë„', offset: 5}, {name: 'ì²­ì†¡', offset: 2}, {name: 'ì¹ ê³¡', offset: 5},
                {name: 'í¬í•­', offset: 7}
            ],
            'ë¶€ì‚°ê´‘ì—­ì‹œ': [{name: 'ë¶€ì‚°', offset: 6}],
            'ëŒ€êµ¬ê´‘ì—­ì‹œ': [{name: 'ëŒ€êµ¬', offset: 5}],
            'ìš¸ì‚°ê´‘ì—­ì‹œ': [{name: 'ìš¸ì‚°', offset: 6}],
            'ì œì£¼íŠ¹ë³„ìì¹˜ë„': [
                {name: 'ì„œê·€í¬', offset: -5}, {name: 'ì œì£¼', offset: -6}
            ],
            'ê¸°íƒ€ë„ì„œ': [
                {name: 'ë°±ë ¹ë„', offset: -12}, {name: 'ì—°í‰ë„', offset: -8}, {name: 'ìš¸ë¦‰ë„', offset: 13}
            ]
        };
        
        // ì‹œê°„ ëª¨ë¦„ ì²´í¬ë°•ìŠ¤
        document.getElementById('unknownTime').addEventListener('change', function(e) {
            const timeInputs = document.getElementById('timeInputs');
            if (e.target.checked) {
                timeInputs.style.opacity = '0.5';
                timeInputs.style.pointerEvents = 'none';
                document.getElementById('hour').value = 11;
                document.getElementById('minute').value = 30;
            } else {
                timeInputs.style.opacity = '1';
                timeInputs.style.pointerEvents = 'auto';
            }
        });
        
        // ì§€ì—­ ì„ íƒ ì‹œ ë„ì‹œ ëª©ë¡ ì—…ë°ì´íŠ¸
        document.getElementById('region').addEventListener('change', function(e) {
            const region = e.target.value;
            const cityGroup = document.getElementById('cityGroup');
            const citySelect = document.getElementById('city');
            
            if (region && regionData[region]) {
                cityGroup.style.display = 'block';
                citySelect.innerHTML = '<option value="">ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
                
                const cities = regionData[region];
                cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = `${city.offset}:${city.name}`;
                    const sign = city.offset >= 0 ? '+' : '';
                    option.textContent = `${city.name} (${sign}${city.offset}ë¶„)`;
                    citySelect.appendChild(option);
                });
                citySelect.required = true;
            } else {
                cityGroup.style.display = 'none';
                citySelect.required = false;
            }
        });
        
        // ì²œê°„ê³¼ ì§€ì§€
        const stems = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const branches = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];
        
        // ì˜¤í–‰
        const stemElements = {
            'ê°‘': 'æœ¨', 'ì„': 'æœ¨', 'ë³‘': 'ç«', 'ì •': 'ç«', 'ë¬´': 'åœŸ',
            'ê¸°': 'åœŸ', 'ê²½': 'é‡‘', 'ì‹ ': 'é‡‘', 'ì„': 'æ°´', 'ê³„': 'æ°´'
        };
        
        const branchElements = {
            'ì': 'æ°´', 'ì¶•': 'åœŸ', 'ì¸': 'æœ¨', 'ë¬˜': 'æœ¨', 'ì§„': 'åœŸ', 'ì‚¬': 'ç«',
            'ì˜¤': 'ç«', 'ë¯¸': 'åœŸ', 'ì‹ ': 'é‡‘', 'ìœ ': 'é‡‘', 'ìˆ ': 'åœŸ', 'í•´': 'æ°´'
        };
        
        // ì‹­ì„± (ì¼ê°„ ê¸°ì¤€)
        function getSipsung(dayStem, targetStem) {
            const dayStemIdx = stems.indexOf(dayStem);
            const targetStemIdx = stems.indexOf(targetStem);
            
            const diff = (targetStemIdx - dayStemIdx + 10) % 10;
            const dayYinYang = dayStemIdx % 2;
            const targetYinYang = targetStemIdx % 2;
            const sameSex = (dayYinYang === targetYinYang);
            
            if (diff === 0) return 'ë¹„ê²¬';
            if (diff === 1) return sameSex ? 'ê²ì¬' : 'ê²ì¬';
            if (diff === 2) return sameSex ? 'ì‹ì‹ ' : 'ìƒê´€';
            if (diff === 3) return sameSex ? 'ìƒê´€' : 'ì‹ì‹ ';
            if (diff === 4) return sameSex ? 'í¸ì¬' : 'ì •ì¬';
            if (diff === 5) return sameSex ? 'ì •ì¬' : 'í¸ì¬';
            if (diff === 6) return sameSex ? 'í¸ê´€' : 'ì •ê´€';
            if (diff === 7) return sameSex ? 'ì •ê´€' : 'í¸ê´€';
            if (diff === 8) return sameSex ? 'í¸ì¸' : 'ì •ì¸';
            if (diff === 9) return sameSex ? 'ì •ì¸' : 'í¸ì¸';
            
            return '-';
        }
        
        // 12ìš´ì„±
        function get12Unseong(dayStem, branch) {
            const unseongTable = {
                'ê°‘': ['í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ '],
                'ì„': ['ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬'],
                'ë³‘': ['ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•'],
                'ì •': ['ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ '],
                'ë¬´': ['ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•'],
                'ê¸°': ['ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ '],
                'ê²½': ['ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„'],
                'ì‹ ': ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'],
                'ì„': ['ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸'],
                'ê³„': ['ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´', 'ì', 'ì¶•', 'ì¸']
            };
            
            const unseongNames = ['ì¥ìƒ', 'ëª©ìš•', 'ê´€ëŒ€', 'ê±´ë¡', 'ì œì™•', 'ì‡ ', 'ë³‘', 'ì‚¬', 'ë¬˜', 'ì ˆ', 'íƒœ', 'ì–‘'];
            
            const order = unseongTable[dayStem];
            if (!order) return '-';
            
            const idx = order.indexOf(branch);
            return idx >= 0 ? unseongNames[idx] : '-';
        }
        
        function getSixtyJiazi(num) {
            return stems[num % 10] + branches[num % 12];
        }
        
        function getYearPillar(year) {
            let index = (year - 1984) % 60;
            if (index < 0) index += 60;
            return getSixtyJiazi(index);
        }
        
        function getMonthPillar(year, month) {
            const yearStem = (year - 4) % 10;
            const monthStems = [
                [4, 6, 8, 0, 2, 4, 6, 8, 0, 2, 4, 6],
                [6, 8, 0, 2, 4, 6, 8, 0, 2, 4, 6, 8],
                [8, 0, 2, 4, 6, 8, 0, 2, 4, 6, 8, 0],
                [0, 2, 4, 6, 8, 0, 2, 4, 6, 8, 0, 2],
                [2, 4, 6, 8, 0, 2, 4, 6, 8, 0, 2, 4]
            ];
            const monthBranches = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 0, 1];
            const stemGroup = Math.floor(yearStem / 2);
            const stemIdx = monthStems[stemGroup][month - 1];
            const branchIdx = monthBranches[month - 1];
            return stems[stemIdx] + branches[branchIdx];
        }
        
        function getDayPillar(year, month, day) {
            let a = Math.floor((14 - month) / 12);
            let y = year + 4800 - a;
            let m = month + 12 * a - 3;
            let jdn = day + Math.floor((153 * m + 2) / 5) + 365 * y + 
                     Math.floor(y / 4) - Math.floor(y / 100) + 
                     Math.floor(y / 400) - 32045;
            const baseJdn = 2445724;
            let daysSince = jdn - baseJdn;
            let index = daysSince % 60;
            if (index < 0) index += 60;
            return getSixtyJiazi(index);
        }
        
        function getHourPillar(dayPillar, hour, minute) {
            let totalMinutes = hour * 60 + minute;
            
            if (totalMinutes >= 1410) {
                totalMinutes = totalMinutes - 1440;
            }
            
            let hourBranchIdx;
            if (totalMinutes >= -30 && totalMinutes < 90) hourBranchIdx = 0;
            else if (totalMinutes >= 90 && totalMinutes < 210) hourBranchIdx = 1;
            else if (totalMinutes >= 210 && totalMinutes < 330) hourBranchIdx = 2;
            else if (totalMinutes >= 330 && totalMinutes < 450) hourBranchIdx = 3;
            else if (totalMinutes >= 450 && totalMinutes < 570) hourBranchIdx = 4;
            else if (totalMinutes >= 570 && totalMinutes < 690) hourBranchIdx = 5;
            else if (totalMinutes >= 690 && totalMinutes < 810) hourBranchIdx = 6;
            else if (totalMinutes >= 810 && totalMinutes < 930) hourBranchIdx = 7;
            else if (totalMinutes >= 930 && totalMinutes < 1050) hourBranchIdx = 8;
            else if (totalMinutes >= 1050 && totalMinutes < 1170) hourBranchIdx = 9;
            else if (totalMinutes >= 1170 && totalMinutes < 1290) hourBranchIdx = 10;
            else hourBranchIdx = 11;
            
            const dayStem = dayPillar.charAt(0);
            const dayStemIdx = stems.indexOf(dayStem);
            const hourStemStarts = [0, 2, 4, 6, 8, 0, 2, 4, 6, 8];
            const hourStemIdx = (hourStemStarts[dayStemIdx] + hourBranchIdx) % 10;
            
            return stems[hourStemIdx] + branches[hourBranchIdx];
        }
        
        // í¼ ì œì¶œ
        document.getElementById('sajuForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            try {
                const name = document.getElementById('name').value;
                const gender = document.getElementById('gender').value;
                let year = parseInt(document.getElementById('year').value);
                let month = parseInt(document.getElementById('month').value);
                let day = parseInt(document.getElementById('day').value);
                let hour = parseInt(document.getElementById('hour').value);
                let minute = parseInt(document.getElementById('minute').value);
                
                const cityValue = document.getElementById('city').value;
                if (!cityValue) {
                    alert('ë„ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                const [timeZoneStr, cityName] = cityValue.split(':');
                const timeZone = parseInt(timeZoneStr);
                
                // ì‹œì°¨ ë³´ì •
                minute += timeZone;
                if (minute >= 60) {
                    hour += 1;
                    minute -= 60;
                } else if (minute < 0) {
                    hour -= 1;
                    minute += 60;
                }
                
                if (hour >= 24) hour -= 24;
                if (hour < 0) hour += 24;
                
                // ì‚¬ì£¼ ê³„ì‚°
                const yearPillar = getYearPillar(year);
                const monthPillar = getMonthPillar(year, month);
                const dayPillar = getDayPillar(year, month, day);
                const hourPillar = getHourPillar(dayPillar, hour, minute);
                
                // ì²œê°„ì§€ì§€ ë¶„ë¦¬
                const yearStem = yearPillar.charAt(0);
                const yearBranch = yearPillar.charAt(1);
                const monthStem = monthPillar.charAt(0);
                const monthBranch = monthPillar.charAt(1);
                const dayStem = dayPillar.charAt(0);
                const dayBranch = dayPillar.charAt(1);
                const hourStem = hourPillar.charAt(0);
                const hourBranch = hourPillar.charAt(1);
                
                // ê²°ê³¼ í‘œì‹œ
                const genderText = gender === 'male' ? 'ë‚¨ì' : 'ì—¬ì';
                const timeZoneText = timeZone !== 0 ? ` (ì‹œì°¨ë³´ì •: ${timeZone > 0 ? '+' : ''}${timeZone}ë¶„)` : '';
                
                document.getElementById('resultInfo').innerHTML = 
                    `<strong>${name}</strong>ë‹˜ (${genderText}) | ì–‘ë ¥ ${year}ë…„ ${month}ì›” ${day}ì¼ ${hour}ì‹œ ${minute}ë¶„ | ${cityName}${timeZoneText}`;
                
                // ì²œê°„
                document.getElementById('yearStem').textContent = yearStem;
                document.getElementById('monthStem').textContent = monthStem;
                document.getElementById('dayStem').textContent = dayStem;
                document.getElementById('hourStem').textContent = hourStem;
                
                // ì§€ì§€
                document.getElementById('yearBranch').textContent = yearBranch;
                document.getElementById('monthBranch').textContent = monthBranch;
                document.getElementById('dayBranch').textContent = dayBranch;
                document.getElementById('hourBranch').textContent = hourBranch;
                
                // ì˜¤í–‰
                document.getElementById('yearElement').textContent = 
                    `${stemElements[yearStem]} / ${branchElements[yearBranch]}`;
                document.getElementById('monthElement').textContent = 
                    `${stemElements[monthStem]} / ${branchElements[monthBranch]}`;
                document.getElementById('dayElement').textContent = 
                    `${stemElements[dayStem]} / ${branchElements[dayBranch]}`;
                document.getElementById('hourElement').textContent = 
                    `${stemElements[hourStem]} / ${branchElements[hourBranch]}`;
                
                // ì‹­ì„±
                document.getElementById('yearSipsung').textContent = getSipsung(dayStem, yearStem);
                document.getElementById('monthSipsung').textContent = getSipsung(dayStem, monthStem);
                document.getElementById('hourSipsung').textContent = getSipsung(dayStem, hourStem);
                
                // 12ìš´ì„±
                document.getElementById('year12').textContent = get12Unseong(dayStem, yearBranch);
                document.getElementById('month12').textContent = get12Unseong(dayStem, monthBranch);
                document.getElementById('day12').textContent = get12Unseong(dayStem, dayBranch);
                document.getElementById('hour12').textContent = get12Unseong(dayStem, hourBranch);
                
                document.getElementById('result').classList.add('show');
                document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                alert('ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        });
    </script>
</body>
</html>