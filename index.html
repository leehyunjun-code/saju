<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§Œì„¸ë ¥ ê³„ì‚°ê¸°</title>
    <script src="config.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Malgun Gothic', sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 40px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; margin-bottom: 40px; font-size: 24px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #666; font-size: 14px; font-weight: bold; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 16px; }
        input:focus, select:focus { outline: none; border-color: #4CAF50; }
        .date-group { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; }
        .time-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .checkbox-group { display: flex; align-items: center; gap: 8px; padding: 12px 15px; background: #f8f9fa; border-radius: 5px; margin-bottom: 10px; }
        .checkbox-group input[type="checkbox"] { width: auto; margin: 0; cursor: pointer; }
        .checkbox-group label { margin: 0; font-weight: normal; cursor: pointer; white-space: nowrap; }
        button { width: 100%; padding: 15px; background: #4CAF50; color: white; border: none; border-radius: 5px; font-size: 16px; cursor: pointer; margin-top: 30px; }
        button:hover { background: #45a049; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .help-text { font-size: 12px; color: #999; margin-top: 5px; }
        .help-text a { color: #4CAF50; font-weight: bold; text-decoration: none; }
        .help-text a:hover { text-decoration: underline; }
        .time-table { margin-top: 10px; padding: 15px; background: #f9f9f9; border-radius: 5px; font-size: 13px; line-height: 1.8; }
        .time-table h4 { margin-bottom: 10px; color: #333; }
        .result { margin-top: 40px; padding: 30px; background: #f9f9f9; border-radius: 10px; display: none; }
        .result.show { display: block; }
        .result h2 { text-align: center; color: #333; margin-bottom: 20px; font-size: 20px; }
        .result-info { text-align: center; margin-bottom: 30px; color: #666; font-size: 14px; }
        .saju-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .saju-table th { background: #4CAF50; color: white; padding: 12px; font-size: 14px; font-weight: bold; text-align: center; }
        .saju-table td { padding: 15px; text-align: center; border: 1px solid #e0e0e0; font-size: 16px; }
        .pillar-label { background: #f5f5f5; font-weight: bold; color: #666; }
        .stem { font-size: 24px; font-weight: bold; color: #d32f2f; }
        .branch { font-size: 24px; font-weight: bold; color: #1976d2; }
        .element { font-size: 13px; color: #666; margin-top: 5px; }
        .sipsung { font-size: 12px; color: #888; margin-top: 3px; }
        .loading { text-align: center; padding: 20px; color: #666; }
        .error { text-align: center; padding: 20px; color: #d32f2f; background: #ffebee; border-radius: 5px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ë§Œì„¸ë ¥ ê³„ì‚°ê¸°</h1>
        
        <form id="sajuForm">
            <div class="form-group">
                <label>ì´ë¦„</label>
                <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
            </div>
            
            <div class="form-group">
                <label>ì„±ë³„</label>
                <select id="gender" required>
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="male">ë‚¨ì</option>
                    <option value="female">ì—¬ì</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>ìƒë…„ì›”ì¼ (ì–‘ë ¥ë§Œ ì…ë ¥)</label>
                <div class="help-text">â€» ìŒë ¥ì¼ ê²½ìš° <a href="https://astro.kasi.re.kr/life/pageView/8" target="_blank">ì—¬ê¸°ì—ì„œ ì–‘ë ¥ ë³€í™˜</a> í›„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                <div class="date-group" style="margin-top: 10px;">
                    <input type="number" id="year" placeholder="ë…„ (ì˜ˆ: 1990)" min="1900" max="2100" required>
                    <input type="number" id="month" placeholder="ì›”" min="1" max="12" required>
                    <input type="number" id="day" placeholder="ì¼" min="1" max="31" required>
                </div>
            </div>
            
            <div class="form-group">
                <label>ì¶œìƒ ì‹œê°„</label>
                <div class="checkbox-group">
                    <input type="checkbox" id="unknownTime">
                    <label for="unknownTime">ì‹œê°„ì„ ëª¨ë¦„ (ì˜¤ì‹œ 11:30ë¡œ ê³„ì‚°)</label>
                </div>
                <div class="time-group" id="timeInputs">
                    <input type="number" id="hour" placeholder="ì‹œ (0-23)" min="0" max="23" value="11">
                    <input type="number" id="minute" placeholder="ë¶„ (0-59)" min="0" max="59" value="30">
                </div>
                <div class="help-text">â€» ìì‹œ(23:30~01:29)ëŠ” ì „ë‚  ê¸°ì¤€ì…ë‹ˆë‹¤</div>
            </div>
            
            <div class="form-group">
                <label>ì¶œìƒ ì§€ì—­</label>
                <select id="region" required>
                    <option value="">ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="ì„œìš¸íŠ¹ë³„ì‹œ">ì„œìš¸íŠ¹ë³„ì‹œ</option>
                    <option value="ê²½ê¸°ë„">ê²½ê¸°ë„</option>
                    <option value="ì¸ì²œê´‘ì—­ì‹œ">ì¸ì²œê´‘ì—­ì‹œ</option>
                    <option value="ê°•ì›ë„">ê°•ì›ë„</option>
                    <option value="ì¶©ì²­ë‚¨ë„">ì¶©ì²­ë‚¨ë„</option>
                    <option value="ì¶©ì²­ë¶ë„">ì¶©ì²­ë¶ë„</option>
                    <option value="ëŒ€ì „ê´‘ì—­ì‹œ">ëŒ€ì „ê´‘ì—­ì‹œ</option>
                    <option value="ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ">ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ</option>
                    <option value="ì „ë¼ë‚¨ë„">ì „ë¼ë‚¨ë„</option>
                    <option value="ì „ë¼ë¶ë„">ì „ë¼ë¶ë„</option>
                    <option value="ê´‘ì£¼ê´‘ì—­ì‹œ">ê´‘ì£¼ê´‘ì—­ì‹œ</option>
                    <option value="ê²½ìƒë‚¨ë„">ê²½ìƒë‚¨ë„</option>
                    <option value="ê²½ìƒë¶ë„">ê²½ìƒë¶ë„</option>
                    <option value="ë¶€ì‚°ê´‘ì—­ì‹œ">ë¶€ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="ëŒ€êµ¬ê´‘ì—­ì‹œ">ëŒ€êµ¬ê´‘ì—­ì‹œ</option>
                    <option value="ìš¸ì‚°ê´‘ì—­ì‹œ">ìš¸ì‚°ê´‘ì—­ì‹œ</option>
                    <option value="ì œì£¼íŠ¹ë³„ìì¹˜ë„">ì œì£¼íŠ¹ë³„ìì¹˜ë„</option>
                    <option value="ê¸°íƒ€ë„ì„œ">ê¸°íƒ€ ë„ì„œì§€ì—­</option>
                </select>
                <div class="help-text">â€» ì¶œìƒ ì§€ì—­ì´ ì—†ì„ ì‹œ ê·¼ì²˜ ì§€ì—­ìœ¼ë¡œ í•´ì£¼ì„¸ìš”</div>
            </div>
            
            <div class="form-group" id="cityGroup" style="display:none;">
                <label>ë„ì‹œ ì„ íƒ</label>
                <select id="city" required>
                    <option value="">ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                </select>
                <div class="help-text">â€» ë„ì‹œ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ì‹œì°¨ê°€ ë³´ì •ë©ë‹ˆë‹¤</div>
            </div>
            
            <div class="time-table">
                <h4>ğŸ“‹ 12ê°„ì§€ ì‹œê°„í‘œ</h4>
                ìì‹œ(å­æ™‚) 23:30~01:29 | ì¶•ì‹œ(ä¸‘æ™‚) 01:30~03:29 | ì¸ì‹œ(å¯…æ™‚) 03:30~05:29<br>
                ë¬˜ì‹œ(å¯æ™‚) 05:30~07:29 | ì§„ì‹œ(è¾°æ™‚) 07:30~09:29 | ì‚¬ì‹œ(å·³æ™‚) 09:30~11:29<br>
                ì˜¤ì‹œ(åˆæ™‚) 11:30~13:29 | ë¯¸ì‹œ(æœªæ™‚) 13:30~15:29 | ì‹ ì‹œ(ç”³æ™‚) 15:30~17:29<br>
                ìœ ì‹œ(é…‰æ™‚) 17:30~19:29 | ìˆ ì‹œ(æˆŒæ™‚) 19:30~21:29 | í•´ì‹œ(äº¥æ™‚) 21:30~23:29
            </div>
            
            <button type="submit" id="submitBtn">ì‚¬ì£¼íŒ”ì ê³„ì‚°í•˜ê¸°</button>
        </form>
        
        <div id="loadingMsg" class="loading" style="display:none;">ì ˆê¸° ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        <div id="errorMsg" class="error" style="display:none;"></div>
        
        <div class="result" id="result">
            <h2>ì‚¬ì£¼íŒ”ì ê²°ê³¼</h2>
            <div class="result-info" id="resultInfo"></div>
            
            <table class="saju-table">
                <thead>
                    <tr>
                        <th>êµ¬ë¶„</th>
                        <th>ìƒì‹œ</th>
                        <th>ìƒì¼</th>
                        <th>ìƒì›”</th>
                        <th>ìƒë…„</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="pillar-label">ì²œê°„</td>
                        <td class="stem" id="hourStem">-</td>
                        <td class="stem" id="dayStem">-</td>
                        <td class="stem" id="monthStem">-</td>
                        <td class="stem" id="yearStem">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì‹­ì„±(ì²œê°„)</td>
                        <td class="sipsung" id="hourStemSipsung">-</td>
                        <td class="sipsung">ë¹„ê²¬</td>
                        <td class="sipsung" id="monthStemSipsung">-</td>
                        <td class="sipsung" id="yearStemSipsung">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì§€ì§€</td>
                        <td class="branch" id="hourBranch">-</td>
                        <td class="branch" id="dayBranch">-</td>
                        <td class="branch" id="monthBranch">-</td>
                        <td class="branch" id="yearBranch">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">ì‹­ì„±(ì§€ì§€)</td>
                        <td class="sipsung" id="hourBranchSipsung">-</td>
                        <td class="sipsung" id="dayBranchSipsung">-</td>
                        <td class="sipsung" id="monthBranchSipsung">-</td>
                        <td class="sipsung" id="yearBranchSipsung">-</td>
                    </tr>
                    <tr>
                        <td class="pillar-label">12ìš´ì„±</td>
                        <td class="sipsung" id="hour12">-</td>
                        <td class="sipsung" id="day12">-</td>
                        <td class="sipsung" id="month12">-</td>
                        <td class="sipsung" id="year12">-</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ì§€ì—­ë³„ ë„ì‹œ ë°ì´í„°
        const regionData = {
            'ì„œìš¸íŠ¹ë³„ì‹œ': [{name: 'ì„œìš¸', lng: 127.0, offset: -32}],
            'ê²½ê¸°ë„': [
                {name: 'ê°€í‰', lng: 127.51, offset: -30}, {name: 'ê³ ì–‘', lng: 126.83, offset: -33},
                {name: 'ê³¼ì²œ', lng: 127.0, offset: -32}, {name: 'ê´‘ëª…', lng: 126.87, offset: -33},
                {name: 'ê´‘ì£¼', lng: 127.26, offset: -31}, {name: 'êµ¬ë¦¬', lng: 127.14, offset: -31},
                {name: 'êµ°í¬', lng: 126.94, offset: -32}, {name: 'ê¹€í¬', lng: 126.72, offset: -33},
                {name: 'ë‚¨ì–‘ì£¼', lng: 127.22, offset: -31}, {name: 'ë™ë‘ì²œ', lng: 127.06, offset: -32},
                {name: 'ë¶€ì²œ', lng: 126.78, offset: -33}, {name: 'ì„±ë‚¨', lng: 127.14, offset: -31},
                {name: 'ìˆ˜ì›', lng: 127.0, offset: -32}, {name: 'ì‹œí¥', lng: 126.8, offset: -33},
                {name: 'ì•ˆì‚°', lng: 126.83, offset: -33}, {name: 'ì•ˆì„±', lng: 127.28, offset: -31},
                {name: 'ì•ˆì–‘', lng: 126.95, offset: -32}, {name: 'ì–‘ì£¼', lng: 127.05, offset: -32},
                {name: 'ì–‘í‰', lng: 127.49, offset: -30}, {name: 'ì—¬ì£¼', lng: 127.64, offset: -29},
                {name: 'ì—°ì²œ', lng: 127.07, offset: -32}, {name: 'ì˜¤ì‚°', lng: 127.07, offset: -32},
                {name: 'ìš©ì¸', lng: 127.18, offset: -31}, {name: 'ì˜ì™•', lng: 126.97, offset: -32},
                {name: 'ì˜ì •ë¶€', lng: 127.03, offset: -32}, {name: 'ì´ì²œ', lng: 127.44, offset: -30},
                {name: 'íŒŒì£¼', lng: 126.78, offset: -33}, {name: 'í‰íƒ', lng: 127.09, offset: -32},
                {name: 'í¬ì²œ', lng: 127.2, offset: -31}, {name: 'í•˜ë‚¨', lng: 127.21, offset: -31},
                {name: 'í™”ì„±', lng: 126.83, offset: -33}
            ],
            'ì¸ì²œê´‘ì—­ì‹œ': [
                {name: 'ê°•í™”', lng: 126.49, offset: -34}, {name: 'ê³„ì–‘êµ¬', lng: 126.74, offset: -33},
                {name: 'ë‚¨ë™êµ¬', lng: 126.73, offset: -33}, {name: 'ë™êµ¬', lng: 126.65, offset: -33},
                {name: 'ë¶€í‰êµ¬', lng: 126.72, offset: -33}, {name: 'ì„œêµ¬', lng: 126.68, offset: -33},
                {name: 'ì—°ìˆ˜êµ¬', lng: 126.68, offset: -33}, {name: 'ì˜ì¢…ë„', lng: 126.49, offset: -34},
                {name: 'ì¸ì²œ', lng: 126.71, offset: -33}, {name: 'ì¤‘êµ¬', lng: 126.62, offset: -34}
            ],
            'ê°•ì›ë„': [
                {name: 'ê°•ë¦‰', lng: 128.9, offset: -24}, {name: 'ê³ ì„±', lng: 128.47, offset: -26},
                {name: 'ë™í•´', lng: 129.11, offset: -24}, {name: 'ì‚¼ì²™', lng: 129.17, offset: -23},
                {name: 'ì†ì´ˆ', lng: 128.59, offset: -26}, {name: 'ì–‘ì–‘', lng: 128.62, offset: -25},
                {name: 'ì˜ì›”', lng: 128.46, offset: -26}, {name: 'ì›ì£¼', lng: 127.95, offset: -28},
                {name: 'ì¸ì œ', lng: 128.17, offset: -27}, {name: 'ì •ì„ ', lng: 128.66, offset: -25},
                {name: 'ì² ì›', lng: 127.31, offset: -31}, {name: 'ì¶˜ì²œ', lng: 127.73, offset: -29},
                {name: 'íƒœë°±', lng: 128.99, offset: -24}, {name: 'í‰ì°½', lng: 128.39, offset: -26},
                {name: 'í™ì²œ', lng: 127.89, offset: -28}, {name: 'í™”ì²œ', lng: 127.71, offset: -29}
            ],
            'ì¶©ì²­ë‚¨ë„': [
                {name: 'ê³µì£¼', lng: 127.12, offset: -32}, {name: 'ê¸ˆì‚°', lng: 127.49, offset: -30},
                {name: 'ë…¼ì‚°', lng: 127.1, offset: -32}, {name: 'ë‹¹ì§„', lng: 126.63, offset: -33},
                {name: 'ë³´ë ¹', lng: 126.61, offset: -34}, {name: 'ë¶€ì—¬', lng: 126.91, offset: -32},
                {name: 'ì„œì‚°', lng: 126.45, offset: -34}, {name: 'ì„œì²œ', lng: 126.69, offset: -33},
                {name: 'ì•„ì‚°', lng: 127.0, offset: -32}, {name: 'ì˜ˆì‚°', lng: 126.85, offset: -33},
                {name: 'ì²œì•ˆ', lng: 127.15, offset: -31}, {name: 'ì²­ì–‘', lng: 126.8, offset: -33},
                {name: 'íƒœì•ˆ', lng: 126.3, offset: -35}, {name: 'í™ì„±', lng: 126.66, offset: -33}
            ],
            'ì¶©ì²­ë¶ë„': [
                {name: 'ê´´ì‚°', lng: 127.79, offset: -29}, {name: 'ë‹¨ì–‘', lng: 128.37, offset: -27},
                {name: 'ë³´ì€', lng: 127.73, offset: -29}, {name: 'ì˜ë™', lng: 127.78, offset: -29},
                {name: 'ì˜¥ì²œ', lng: 127.57, offset: -30}, {name: 'ìŒì„±', lng: 127.69, offset: -29},
                {name: 'ì œì²œ', lng: 128.19, offset: -27}, {name: 'ì¦í‰', lng: 127.58, offset: -30},
                {name: 'ì§„ì²œ', lng: 127.44, offset: -30}, {name: 'ì²­ì£¼', lng: 127.49, offset: -30},
                {name: 'ì¶©ì£¼', lng: 127.93, offset: -28}
            ],
            'ëŒ€ì „ê´‘ì—­ì‹œ': [{name: 'ëŒ€ì „', lng: 127.38, offset: -30}],
            'ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ': [{name: 'ì„¸ì¢…', lng: 127.29, offset: -31}],
            'ì „ë¼ë‚¨ë„': [
                {name: 'ê°•ì§„', lng: 126.77, offset: -33}, {name: 'ê³ í¥', lng: 127.28, offset: -31},
                {name: 'ê³¡ì„±', lng: 127.29, offset: -31}, {name: 'ê´‘ì–‘', lng: 127.59, offset: -30},
                {name: 'êµ¬ë¡€', lng: 127.46, offset: -30}, {name: 'ë‚˜ì£¼', lng: 126.71, offset: -33},
                {name: 'ë‹´ì–‘', lng: 126.99, offset: -32}, {name: 'ëª©í¬', lng: 126.39, offset: -34},
                {name: 'ë¬´ì•ˆ', lng: 126.48, offset: -34}, {name: 'ë³´ì„±', lng: 127.08, offset: -32},
                {name: 'ìˆœì²œ', lng: 127.49, offset: -30}, {name: 'ì‹ ì•ˆ', lng: 126.11, offset: -36},
                {name: 'ì—¬ìˆ˜', lng: 127.66, offset: -29}, {name: 'ì˜ê´‘', lng: 126.51, offset: -34},
                {name: 'ì˜ì•”', lng: 126.7, offset: -33}, {name: 'ì™„ë„', lng: 126.76, offset: -33},
                {name: 'ì¥ì„±', lng: 126.78, offset: -33}, {name: 'ì¥í¥', lng: 126.91, offset: -32},
                {name: 'ì§„ë„', lng: 126.26, offset: -35}, {name: 'í•¨í‰', lng: 126.52, offset: -34},
                {name: 'í•´ë‚¨', lng: 126.6, offset: -34}, {name: 'í™”ìˆœ', lng: 127.0, offset: -32}
            ],
            'ì „ë¼ë¶ë„': [
                {name: 'ê³ ì°½', lng: 126.7, offset: -33}, {name: 'êµ°ì‚°', lng: 126.74, offset: -33},
                {name: 'ê¹€ì œ', lng: 126.88, offset: -32}, {name: 'ë‚¨ì›', lng: 127.39, offset: -30},
                {name: 'ë¬´ì£¼', lng: 127.66, offset: -29}, {name: 'ë¶€ì•ˆ', lng: 126.73, offset: -33},
                {name: 'ìˆœì°½', lng: 127.14, offset: -31}, {name: 'ì™„ì£¼', lng: 127.16, offset: -31},
                {name: 'ìµì‚°', lng: 126.96, offset: -32}, {name: 'ì„ì‹¤', lng: 127.29, offset: -31},
                {name: 'ì¥ìˆ˜', lng: 127.52, offset: -30}, {name: 'ì „ì£¼', lng: 127.15, offset: -31},
                {name: 'ì •ì', lng: 126.86, offset: -33}, {name: 'ì§„ì•ˆ', lng: 127.42, offset: -30}
            ],
            'ê´‘ì£¼ê´‘ì—­ì‹œ': [{name: 'ê´‘ì£¼', lng: 126.85, offset: -33}],
            'ê²½ìƒë‚¨ë„': [
                {name: 'ê±°ì œ', lng: 128.62, offset: -25}, {name: 'ê±°ì°½', lng: 127.91, offset: -28},
                {name: 'ê³ ì„±', lng: 128.32, offset: -27}, {name: 'ê¹€í•´', lng: 128.89, offset: -24},
                {name: 'ë‚¨í•´', lng: 127.89, offset: -28}, {name: 'ë°€ì–‘', lng: 128.75, offset: -25},
                {name: 'ì‚¬ì²œ', lng: 128.06, offset: -28}, {name: 'ì‚°ì²­', lng: 127.87, offset: -29},
                {name: 'ì–‘ì‚°', lng: 129.04, offset: -24}, {name: 'ì˜ë ¹', lng: 128.26, offset: -27},
                {name: 'ì§„ì£¼', lng: 128.11, offset: -28}, {name: 'ì°½ë…•', lng: 128.49, offset: -26},
                {name: 'ì°½ì›', lng: 128.68, offset: -25}, {name: 'í†µì˜', lng: 128.43, offset: -26},
                {name: 'í•˜ë™', lng: 127.75, offset: -29}, {name: 'í•¨ì•ˆ', lng: 128.41, offset: -26},
                {name: 'í•¨ì–‘', lng: 127.73, offset: -29}, {name: 'í•©ì²œ', lng: 128.17, offset: -27}
            ],
            'ê²½ìƒë¶ë„': [
                {name: 'ê²½ì‚°', lng: 128.74, offset: -25}, {name: 'ê²½ì£¼', lng: 129.21, offset: -23},
                {name: 'ê³ ë ¹', lng: 128.26, offset: -27}, {name: 'êµ¬ë¯¸', lng: 128.34, offset: -27},
                {name: 'êµ°ìœ„', lng: 128.57, offset: -26}, {name: 'ê¹€ì²œ', lng: 128.11, offset: -28},
                {name: 'ë¬¸ê²½', lng: 128.19, offset: -27}, {name: 'ë´‰í™”', lng: 128.73, offset: -25},
                {name: 'ìƒì£¼', lng: 128.16, offset: -27}, {name: 'ì„±ì£¼', lng: 128.28, offset: -27},
                {name: 'ì•ˆë™', lng: 128.73, offset: -25}, {name: 'ì˜ë•', lng: 129.37, offset: -23},
                {name: 'ì˜ì–‘', lng: 129.11, offset: -24}, {name: 'ì˜ì£¼', lng: 128.62, offset: -25},
                {name: 'ì˜ì²œ', lng: 128.94, offset: -24}, {name: 'ì˜ˆì²œ', lng: 128.45, offset: -26},
                {name: 'ìš¸ì§„', lng: 129.4, offset: -22}, {name: 'ì˜ì„±', lng: 128.7, offset: -25},
                {name: 'ì²­ë„', lng: 128.73, offset: -25}, {name: 'ì²­ì†¡', lng: 129.06, offset: -24},
                {name: 'ì¹ ê³¡', lng: 128.4, offset: -26}, {name: 'í¬í•­', lng: 129.34, offset: -23}
            ],
            'ë¶€ì‚°ê´‘ì—­ì‹œ': [{name: 'ë¶€ì‚°', lng: 129.08, offset: -24}],
            'ëŒ€êµ¬ê´‘ì—­ì‹œ': [{name: 'ëŒ€êµ¬', lng: 128.6, offset: -26}],
            'ìš¸ì‚°ê´‘ì—­ì‹œ': [{name: 'ìš¸ì‚°', lng: 129.31, offset: -23}],
            'ì œì£¼íŠ¹ë³„ìì¹˜ë„': [
                {name: 'ì„œê·€í¬', lng: 126.56, offset: -34}, {name: 'ì œì£¼', lng: 126.53, offset: -34}
            ],
            'ê¸°íƒ€ë„ì„œ': [
                {name: 'ë°±ë ¹ë„', lng: 124.72, offset: -41}, {name: 'ì—°í‰ë„', lng: 125.7, offset: -37},
                {name: 'ìš¸ë¦‰ë„', lng: 130.91, offset: -16}
            ]
        };
        
        // ì²œê°„ê³¼ ì§€ì§€
        const stems = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const branches = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];
        
        // í•œì ë§¤í•‘
        const stemHanja = {
            'ê°‘': 'ç”²', 'ì„': 'ä¹™', 'ë³‘': 'ä¸™', 'ì •': 'ä¸', 'ë¬´': 'æˆŠ',
            'ê¸°': 'å·±', 'ê²½': 'åºš', 'ì‹ ': 'è¾›', 'ì„': 'å£¬', 'ê³„': 'ç™¸'
        };
        
        const branchHanja = {
            'ì': 'å­', 'ì¶•': 'ä¸‘', 'ì¸': 'å¯…', 'ë¬˜': 'å¯', 'ì§„': 'è¾°', 'ì‚¬': 'å·³',
            'ì˜¤': 'åˆ', 'ë¯¸': 'æœª', 'ì‹ ': 'ç”³', 'ìœ ': 'é…‰', 'ìˆ ': 'æˆŒ', 'í•´': 'äº¥'
        };

        // ì˜¤í–‰
        const stemElements = {
            'ê°‘': 'æœ¨', 'ì„': 'æœ¨', 'ë³‘': 'ç«', 'ì •': 'ç«', 'ë¬´': 'åœŸ',
            'ê¸°': 'åœŸ', 'ê²½': 'é‡‘', 'ì‹ ': 'é‡‘', 'ì„': 'æ°´', 'ê³„': 'æ°´'
        };
        
        const branchElements = {
            'ì': 'æ°´', 'ì¶•': 'åœŸ', 'ì¸': 'æœ¨', 'ë¬˜': 'æœ¨', 'ì§„': 'åœŸ', 'ì‚¬': 'ç«',
            'ì˜¤': 'ç«', 'ë¯¸': 'åœŸ', 'ì‹ ': 'é‡‘', 'ìœ ': 'é‡‘', 'ìˆ ': 'åœŸ', 'í•´': 'æ°´'
        };
        
        // ì§€ì§€ì˜ ë³¸ê¸°(æœ¬æ°£) ë§¤í•‘
        const branchMainStem = {
            'ì': 'ê³„', 'ì¶•': 'ê¸°', 'ì¸': 'ê°‘', 'ë¬˜': 'ì„', 'ì§„': 'ë¬´', 'ì‚¬': 'ë³‘',
            'ì˜¤': 'ì •', 'ë¯¸': 'ê¸°', 'ì‹ ': 'ê²½', 'ìœ ': 'ì‹ ', 'ìˆ ': 'ë¬´', 'í•´': 'ì„'
        };
        
        // ì ˆê¸° ë°ì´í„° ìºì‹œ
        let solarTermsCache = {};
        
        // APIë¡œ 24ì ˆê¸° ì •ë³´ ì¡°íšŒ
        async function fetchSolarTerms(year) {
            if (solarTermsCache[year]) {
                return solarTermsCache[year];
            }
            
            const url = `https://apis.data.go.kr/B090041/openapi/service/SpcdeInfoService/get24DivisionsInfo?solYear=${year}&numOfRows=30&ServiceKey=${CONFIG.API_SERVICE_KEY}`;
            
            try {
                const response = await fetch(url);
                const text = await response.text();
                const parser = new DOMParser();
                const xml = parser.parseFromString(text, 'text/xml');
                
                const items = xml.querySelectorAll('item');
                const terms = [];
                
                items.forEach(item => {
                    const dateName = item.querySelector('dateName')?.textContent;
                    const locdate = item.querySelector('locdate')?.textContent;
                    const kst = item.querySelector('kst')?.textContent?.trim();
                    
                    if (dateName && locdate) {
                        const year = parseInt(locdate.substring(0, 4));
                        const month = parseInt(locdate.substring(4, 6));
                        const day = parseInt(locdate.substring(6, 8));
                        
                        let hour = 0, minute = 0;
                        if (kst && kst.length >= 4) {
                            hour = parseInt(kst.substring(0, 2)) || 0;
                            minute = parseInt(kst.substring(2, 4)) || 0;
                        }
                        
                        terms.push({
                            name: dateName,
                            year: year,
                            month: month,
                            day: day,
                            hour: hour,
                            minute: minute,
                            date: new Date(year, month - 1, day, hour, minute)
                        });
                    }
                });
                
                terms.sort((a, b) => a.date - b.date);
                solarTermsCache[year] = terms;
                return terms;
            } catch (error) {
                console.error('ì ˆê¸° API í˜¸ì¶œ ì‹¤íŒ¨:', error);
                throw error;
            }
        }
        
        function findSolarTerm(terms, termName) {
            return terms.find(t => t.name === termName);
        }
        
        function isBeforeSolarTerm(inputDate, solarTerm) {
            if (!solarTerm) return false;
            return inputDate < solarTerm.date;
        }
        
        async function getYearPillarBySolarTerm(year, month, day, hour, minute) {
            const inputDate = new Date(year, month - 1, day, hour, minute);
            const terms = await fetchSolarTerms(year);
            const ipchun = findSolarTerm(terms, 'ì…ì¶˜');
            
            let actualYear = year;
            if (ipchun && isBeforeSolarTerm(inputDate, ipchun)) {
                actualYear = year - 1;
            }
            
            let index = (actualYear - 1984) % 60;
            if (index < 0) index += 60;
            return {
                stem: stems[index % 10],
                branch: branches[index % 12],
                actualYear: actualYear
            };
        }
        
        async function getMonthPillarBySolarTerm(year, month, day, hour, minute, yearStem) {
            const inputDate = new Date(year, month - 1, day, hour, minute);
            const currentYearTerms = await fetchSolarTerms(year);
            const prevYearTerms = await fetchSolarTerms(year - 1);
            
            let monthBranchIdx = 1;
            
            if (month === 1) {
                const sohan = findSolarTerm(currentYearTerms, 'ì†Œí•œ');
                const ipchun = findSolarTerm(currentYearTerms, 'ì…ì¶˜');
                
                if (sohan && isBeforeSolarTerm(inputDate, sohan)) {
                    monthBranchIdx = 0;
                } else if (ipchun && isBeforeSolarTerm(inputDate, ipchun)) {
                    monthBranchIdx = 1;
                } else {
                    monthBranchIdx = 2;
                }
            } else if (month === 2) {
                const ipchun = findSolarTerm(currentYearTerms, 'ì…ì¶˜');
                const gyeongchip = findSolarTerm(currentYearTerms, 'ê²½ì¹©');
                
                if (ipchun && isBeforeSolarTerm(inputDate, ipchun)) {
                    monthBranchIdx = 1;
                } else if (gyeongchip && isBeforeSolarTerm(inputDate, gyeongchip)) {
                    monthBranchIdx = 2;
                } else {
                    monthBranchIdx = 3;
                }
            } else if (month === 3) {
                const gyeongchip = findSolarTerm(currentYearTerms, 'ê²½ì¹©');
                const cheongmyeong = findSolarTerm(currentYearTerms, 'ì²­ëª…');
                
                if (gyeongchip && isBeforeSolarTerm(inputDate, gyeongchip)) {
                    monthBranchIdx = 2;
                } else if (cheongmyeong && isBeforeSolarTerm(inputDate, cheongmyeong)) {
                    monthBranchIdx = 3;
                } else {
                    monthBranchIdx = 4;
                }
            } else if (month === 4) {
                const cheongmyeong = findSolarTerm(currentYearTerms, 'ì²­ëª…');
                const ipha = findSolarTerm(currentYearTerms, 'ì…í•˜');
                
                if (cheongmyeong && isBeforeSolarTerm(inputDate, cheongmyeong)) {
                    monthBranchIdx = 3;
                } else if (ipha && isBeforeSolarTerm(inputDate, ipha)) {
                    monthBranchIdx = 4;
                } else {
                    monthBranchIdx = 5;
                }
            } else if (month === 5) {
                const ipha = findSolarTerm(currentYearTerms, 'ì…í•˜');
                const mangjong = findSolarTerm(currentYearTerms, 'ë§ì¢…');
                
                if (ipha && isBeforeSolarTerm(inputDate, ipha)) {
                    monthBranchIdx = 4;
                } else if (mangjong && isBeforeSolarTerm(inputDate, mangjong)) {
                    monthBranchIdx = 5;
                } else {
                    monthBranchIdx = 6;
                }
            } else if (month === 6) {
                const mangjong = findSolarTerm(currentYearTerms, 'ë§ì¢…');
                const soseo = findSolarTerm(currentYearTerms, 'ì†Œì„œ');
                
                if (mangjong && isBeforeSolarTerm(inputDate, mangjong)) {
                    monthBranchIdx = 5;
                } else if (soseo && isBeforeSolarTerm(inputDate, soseo)) {
                    monthBranchIdx = 6;
                } else {
                    monthBranchIdx = 7;
                }
            } else if (month === 7) {
                const soseo = findSolarTerm(currentYearTerms, 'ì†Œì„œ');
                const ipchu = findSolarTerm(currentYearTerms, 'ì…ì¶”');
                
                if (soseo && isBeforeSolarTerm(inputDate, soseo)) {
                    monthBranchIdx = 6;
                } else if (ipchu && isBeforeSolarTerm(inputDate, ipchu)) {
                    monthBranchIdx = 7;
                } else {
                    monthBranchIdx = 8;
                }
            } else if (month === 8) {
                const ipchu = findSolarTerm(currentYearTerms, 'ì…ì¶”');
                const baengno = findSolarTerm(currentYearTerms, 'ë°±ë¡œ');
                
                if (ipchu && isBeforeSolarTerm(inputDate, ipchu)) {
                    monthBranchIdx = 7;
                } else if (baengno && isBeforeSolarTerm(inputDate, baengno)) {
                    monthBranchIdx = 8;
                } else {
                    monthBranchIdx = 9;
                }
            } else if (month === 9) {
                const baengno = findSolarTerm(currentYearTerms, 'ë°±ë¡œ');
                const hallo = findSolarTerm(currentYearTerms, 'í•œë¡œ');
                
                if (baengno && isBeforeSolarTerm(inputDate, baengno)) {
                    monthBranchIdx = 8;
                } else if (hallo && isBeforeSolarTerm(inputDate, hallo)) {
                    monthBranchIdx = 9;
                } else {
                    monthBranchIdx = 10;
                }
            } else if (month === 10) {
                const hallo = findSolarTerm(currentYearTerms, 'í•œë¡œ');
                const ipdong = findSolarTerm(currentYearTerms, 'ì…ë™');
                
                if (hallo && isBeforeSolarTerm(inputDate, hallo)) {
                    monthBranchIdx = 9;
                } else if (ipdong && isBeforeSolarTerm(inputDate, ipdong)) {
                    monthBranchIdx = 10;
                } else {
                    monthBranchIdx = 11;
                }
            } else if (month === 11) {
                const ipdong = findSolarTerm(currentYearTerms, 'ì…ë™');
                const daeseol = findSolarTerm(currentYearTerms, 'ëŒ€ì„¤');
                
                if (ipdong && isBeforeSolarTerm(inputDate, ipdong)) {
                    monthBranchIdx = 10;
                } else if (daeseol && isBeforeSolarTerm(inputDate, daeseol)) {
                    monthBranchIdx = 11;
                } else {
                    monthBranchIdx = 0;
                }
            } else if (month === 12) {
                const daeseol = findSolarTerm(currentYearTerms, 'ëŒ€ì„¤');
                
                if (daeseol && isBeforeSolarTerm(inputDate, daeseol)) {
                    monthBranchIdx = 11;
                } else {
                    monthBranchIdx = 0;
                }
            }
            
            const yearStemIdx = stems.indexOf(yearStem);
            const monthStemStarts = [2, 4, 6, 8, 0];
            const startStemIdx = monthStemStarts[yearStemIdx % 5];
            
            let monthOffset = monthBranchIdx - 2;
            if (monthOffset < 0) monthOffset += 12;
            
            const monthStemIdx = (startStemIdx + monthOffset) % 10;
            
            return {
                stem: stems[monthStemIdx],
                branch: branches[monthBranchIdx]
            };
        }
        
        function getDayPillar(year, month, day) {
            let a = Math.floor((14 - month) / 12);
            let y = year + 4800 - a;
            let m = month + 12 * a - 3;
            let jdn = day + Math.floor((153 * m + 2) / 5) + 365 * y + 
                     Math.floor(y / 4) - Math.floor(y / 100) + 
                     Math.floor(y / 400) - 32045;
            const baseJdn = 2445731;
            let daysSince = jdn - baseJdn;
            let index = daysSince % 60;
            if (index < 0) index += 60;
            return {
                stem: stems[index % 10],
                branch: branches[index % 12]
            };
        }
        
        function getHourPillar(dayStem, hour, minute) {
            let totalMinutes = hour * 60 + minute;
            
            if (totalMinutes >= 1410) {
                totalMinutes = totalMinutes - 1440;
            }
            
            let hourBranchIdx;
            if (totalMinutes >= -30 && totalMinutes < 90) hourBranchIdx = 0;
            else if (totalMinutes >= 90 && totalMinutes < 210) hourBranchIdx = 1;
            else if (totalMinutes >= 210 && totalMinutes < 330) hourBranchIdx = 2;
            else if (totalMinutes >= 330 && totalMinutes < 450) hourBranchIdx = 3;
            else if (totalMinutes >= 450 && totalMinutes < 570) hourBranchIdx = 4;
            else if (totalMinutes >= 570 && totalMinutes < 690) hourBranchIdx = 5;
            else if (totalMinutes >= 690 && totalMinutes < 810) hourBranchIdx = 6;
            else if (totalMinutes >= 810 && totalMinutes < 930) hourBranchIdx = 7;
            else if (totalMinutes >= 930 && totalMinutes < 1050) hourBranchIdx = 8;
            else if (totalMinutes >= 1050 && totalMinutes < 1170) hourBranchIdx = 9;
            else if (totalMinutes >= 1170 && totalMinutes < 1290) hourBranchIdx = 10;
            else hourBranchIdx = 11;
            
            const dayStemIdx = stems.indexOf(dayStem);
            const hourStemStarts = [0, 2, 4, 6, 8, 0, 2, 4, 6, 8];
            const hourStemIdx = (hourStemStarts[dayStemIdx] + hourBranchIdx) % 10;
            
            return {
                stem: stems[hourStemIdx],
                branch: branches[hourBranchIdx]
            };
        }
        
        // ì‹­ì„± ê³„ì‚° (ì²œê°„ìš©)
        function getSipsung(dayStem, targetStem) {
            const stemToElement = {
                'ê°‘': 0, 'ì„': 0,
                'ë³‘': 1, 'ì •': 1,
                'ë¬´': 2, 'ê¸°': 2,
                'ê²½': 3, 'ì‹ ': 3,
                'ì„': 4, 'ê³„': 4
            };
            
            const dayStemIdx = stems.indexOf(dayStem);
            const targetStemIdx = stems.indexOf(targetStem);
            
            const dayYin = dayStemIdx % 2;
            const targetYin = targetStemIdx % 2;
            const sameYinYang = (dayYin === targetYin);
            
            const dayElement = stemToElement[dayStem];
            const targetElement = stemToElement[targetStem];
            
            if (dayElement === targetElement) {
                return sameYinYang ? 'ë¹„ê²¬' : 'ê²ì¬';
            }
            
            const iGenerate = (dayElement + 1) % 5;
            if (targetElement === iGenerate) {
                return sameYinYang ? 'ì‹ì‹ ' : 'ìƒê´€';
            }
            
            const generatesMe = (dayElement + 4) % 5;
            if (targetElement === generatesMe) {
                return sameYinYang ? 'í¸ì¸' : 'ì •ì¸';
            }
            
            const iControl = (dayElement + 2) % 5;
            if (targetElement === iControl) {
                return sameYinYang ? 'í¸ì¬' : 'ì •ì¬';
            }
            
            const controlsMe = (dayElement + 3) % 5;
            if (targetElement === controlsMe) {
                return sameYinYang ? 'í¸ê´€' : 'ì •ê´€';
            }
            
            return '-';
        }
        
        // ì§€ì§€ ì‹­ì„± ê³„ì‚° (ì§€ì§€ì˜ ë³¸ê¸° ê¸°ì¤€)
        function getBranchSipsung(dayStem, branch) {
            const mainStem = branchMainStem[branch];
            if (!mainStem) return '-';
            return getSipsung(dayStem, mainStem);
        }
        
        // 12ìš´ì„± ê³„ì‚° 
        function get12Unseong(dayStem, branch) {
            const unseongNames = ['ì¥ìƒ', 'ëª©ìš•', 'ê´€ëŒ€', 'ê±´ë¡', 'ì œì™•', 'ì‡ ', 'ë³‘', 'ì‚¬', 'ë¬˜', 'ì ˆ', 'íƒœ', 'ì–‘'];
            
            const unseongTable = {
                'ê°‘': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 0],
                'ì„': [6, 5, 4, 3, 2, 1, 0, 11, 10, 9, 8, 7],
                'ë³‘': [3, 4, 5, 6, 7, 8, 9, 10, 11, 0, 1, 2],
                'ì •': [8, 7, 6, 5, 4, 3, 2, 1, 0, 11, 10, 9],
                'ë¬´': [3, 4, 5, 6, 7, 8, 9, 10, 11, 0, 1, 2],
                'ê¸°': [8, 7, 6, 5, 4, 3, 2, 1, 0, 11, 10, 9],
                'ê²½': [7, 8, 9, 10, 11, 0, 1, 2, 3, 4, 5, 6],
                'ì‹ ': [0, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
                'ì„': [9, 10, 11, 0, 1, 2, 3, 4, 5, 6, 7, 8],
                'ê³„': [2, 1, 0, 11, 10, 9, 8, 7, 6, 5, 4, 3]
            };
            
            const branchIdx = branches.indexOf(branch);
            if (branchIdx < 0) return '-';
            
            const table = unseongTable[dayStem];
            if (!table) return '-';
            
            return unseongNames[table[branchIdx]];
        }
        
        // ì‹œê°„ ëª¨ë¦„ ì²´í¬ë°•ìŠ¤
        document.getElementById('unknownTime').addEventListener('change', function(e) {
            const timeInputs = document.getElementById('timeInputs');
            if (e.target.checked) {
                timeInputs.style.opacity = '0.5';
                timeInputs.style.pointerEvents = 'none';
                document.getElementById('hour').value = 11;
                document.getElementById('minute').value = 30;
            } else {
                timeInputs.style.opacity = '1';
                timeInputs.style.pointerEvents = 'auto';
            }
        });
        
        // ì§€ì—­ ì„ íƒ ì‹œ ë„ì‹œ ëª©ë¡ ì—…ë°ì´íŠ¸
        document.getElementById('region').addEventListener('change', function(e) {
            const region = e.target.value;
            const cityGroup = document.getElementById('cityGroup');
            const citySelect = document.getElementById('city');
            
            if (region && regionData[region]) {
                cityGroup.style.display = 'block';
                citySelect.innerHTML = '<option value="">ë„ì‹œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
                
                const cities = regionData[region];
                cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = `${city.offset}:${city.name}`;
                    const sign = city.offset >= 0 ? '+' : '';
                    option.textContent = `${city.name} (${sign}${city.offset}ë¶„)`;
                    citySelect.appendChild(option);
                });
                citySelect.required = true;
            } else {
                cityGroup.style.display = 'none';
                citySelect.required = false;
            }
        });
        
        // í¼ ì œì¶œ
        document.getElementById('sajuForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const loadingMsg = document.getElementById('loadingMsg');
            const errorMsg = document.getElementById('errorMsg');
            const result = document.getElementById('result');
            
            submitBtn.disabled = true;
            loadingMsg.style.display = 'block';
            errorMsg.style.display = 'none';
            result.classList.remove('show');
            
            try {
                const name = document.getElementById('name').value;
                const gender = document.getElementById('gender').value;
                let year = parseInt(document.getElementById('year').value);
                let month = parseInt(document.getElementById('month').value);
                let day = parseInt(document.getElementById('day').value);
                let hour = parseInt(document.getElementById('hour').value);
                let minute = parseInt(document.getElementById('minute').value);
                
                const cityValue = document.getElementById('city').value;
                if (!cityValue) {
                    throw new Error('ë„ì‹œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                }
                
                const [timeZoneStr, cityName] = cityValue.split(':');
                const timeZone = parseInt(timeZoneStr);
                
                // ì‹œì°¨ ë³´ì •
                minute += timeZone;
                if (minute >= 60) {
                    hour += 1;
                    minute -= 60;
                } else if (minute < 0) {
                    hour -= 1;
                    minute += 60;
                }
                
                if (hour >= 24) hour -= 24;
                if (hour < 0) hour += 24;
                
                // ìì‹œ ì²˜ë¦¬
                let adjustedYear = year;
                let adjustedMonth = month;
                let adjustedDay = day;
                
                if (hour === 23 && minute >= 30) {
                    const nextDate = new Date(year, month - 1, day + 1);
                    adjustedYear = nextDate.getFullYear();
                    adjustedMonth = nextDate.getMonth() + 1;
                    adjustedDay = nextDate.getDate();
                }
                
                // ì ˆê¸° ê¸°ë°˜ ì‚¬ì£¼ ê³„ì‚°
                const yearPillar = await getYearPillarBySolarTerm(adjustedYear, adjustedMonth, adjustedDay, hour, minute);
                const monthPillar = await getMonthPillarBySolarTerm(adjustedYear, adjustedMonth, adjustedDay, hour, minute, yearPillar.stem);
                const dayPillar = getDayPillar(adjustedYear, adjustedMonth, adjustedDay);
                const hourPillar = getHourPillar(dayPillar.stem, hour, minute);
                
                // ê²°ê³¼ í‘œì‹œ
                const genderText = gender === 'male' ? 'ë‚¨ì' : 'ì—¬ì';
                const timeZoneText = timeZone !== 0 ? ` (ì‹œì°¨ë³´ì •: ${timeZone > 0 ? '+' : ''}${timeZone}ë¶„)` : '';
                
                document.getElementById('resultInfo').innerHTML = 
                    `<strong>${name}</strong>ë‹˜ (${genderText}) | ì–‘ë ¥ ${year}ë…„ ${month}ì›” ${day}ì¼ ${hour}ì‹œ ${minute}ë¶„ | ${cityName}${timeZoneText}`;
                
                // ì²œê°„
                document.getElementById('yearStem').textContent = yearPillar.stem + stemHanja[yearPillar.stem];
                document.getElementById('monthStem').textContent = monthPillar.stem + stemHanja[monthPillar.stem];
                document.getElementById('dayStem').textContent = dayPillar.stem + stemHanja[dayPillar.stem];
                document.getElementById('hourStem').textContent = hourPillar.stem + stemHanja[hourPillar.stem];
            
                // ì§€ì§€
                document.getElementById('yearBranch').textContent = yearPillar.branch + branchHanja[yearPillar.branch];
                document.getElementById('monthBranch').textContent = monthPillar.branch + branchHanja[monthPillar.branch];
                document.getElementById('dayBranch').textContent = dayPillar.branch + branchHanja[dayPillar.branch];
                document.getElementById('hourBranch').textContent = hourPillar.branch + branchHanja[hourPillar.branch];
                
                // ì²œê°„ ì‹­ì„±
                document.getElementById('yearStemSipsung').textContent = getSipsung(dayPillar.stem, yearPillar.stem);
                document.getElementById('monthStemSipsung').textContent = getSipsung(dayPillar.stem, monthPillar.stem);
                document.getElementById('hourStemSipsung').textContent = getSipsung(dayPillar.stem, hourPillar.stem);
                
                // ì§€ì§€ ì‹­ì„± (ë³¸ê¸° ê¸°ì¤€)
                document.getElementById('yearBranchSipsung').textContent = getBranchSipsung(dayPillar.stem, yearPillar.branch);
                document.getElementById('monthBranchSipsung').textContent = getBranchSipsung(dayPillar.stem, monthPillar.branch);
                document.getElementById('dayBranchSipsung').textContent = getBranchSipsung(dayPillar.stem, dayPillar.branch);
                document.getElementById('hourBranchSipsung').textContent = getBranchSipsung(dayPillar.stem, hourPillar.branch);
                
                // 12ìš´ì„±
                document.getElementById('year12').textContent = get12Unseong(dayPillar.stem, yearPillar.branch);
                document.getElementById('month12').textContent = get12Unseong(dayPillar.stem, monthPillar.branch);
                document.getElementById('day12').textContent = get12Unseong(dayPillar.stem, dayPillar.branch);
                document.getElementById('hour12').textContent = get12Unseong(dayPillar.stem, hourPillar.branch);
                
                loadingMsg.style.display = 'none';
                result.classList.add('show');
                result.scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                loadingMsg.style.display = 'none';
                errorMsg.textContent = 'ì˜¤ë¥˜: ' + error.message;
                errorMsg.style.display = 'block';
            } finally {
                submitBtn.disabled = false;
            }
        });
    </script>
</body>
</html>